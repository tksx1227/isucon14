{"name":"isuride","desc":"","tables":[{"name":"chair_locations","type":"BASE TABLE","comment":"椅子の現在位置情報テーブル","columns":[{"name":"id","type":"varchar(26)","nullable":false,"default":null,"comment":""},{"name":"chair_id","type":"varchar(26)","nullable":false,"default":null,"comment":"椅子ID"},{"name":"latitude","type":"int","nullable":false,"default":null,"comment":"経度"},{"name":"longitude","type":"int","nullable":false,"default":null,"comment":"緯度"},{"name":"created_at","type":"datetime(6)","nullable":false,"default":"CURRENT_TIMESTAMP(6)","extra_def":"DEFAULT_GENERATED","comment":"登録日時"}],"indexes":[{"name":"PRIMARY","def":"PRIMARY KEY (id) USING BTREE","table":"chair_locations","columns":["id"],"comment":""}],"constraints":[{"name":"PRIMARY","type":"PRIMARY KEY","def":"PRIMARY KEY (id)","table":"chair_locations","referenced_table":null,"columns":["id"],"referenced_columns":null,"comment":""}],"triggers":[],"def":"CREATE TABLE `chair_locations` (\n  `id` varchar(26) NOT NULL,\n  `chair_id` varchar(26) NOT NULL COMMENT '椅子ID',\n  `latitude` int NOT NULL COMMENT '経度',\n  `longitude` int NOT NULL COMMENT '緯度',\n  `created_at` datetime(6) NOT NULL DEFAULT CURRENT_TIMESTAMP(6) COMMENT '登録日時',\n  PRIMARY KEY (`id`)\n) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci COMMENT='椅子の現在位置情報テーブル'"},{"name":"chair_models","type":"BASE TABLE","comment":"椅子モデルテーブル","columns":[{"name":"name","type":"varchar(50)","nullable":false,"default":null,"comment":"椅子モデル名"},{"name":"speed","type":"int","nullable":false,"default":null,"comment":"移動速度"}],"indexes":[{"name":"PRIMARY","def":"PRIMARY KEY (name) USING BTREE","table":"chair_models","columns":["name"],"comment":""}],"constraints":[{"name":"PRIMARY","type":"PRIMARY KEY","def":"PRIMARY KEY (name)","table":"chair_models","referenced_table":null,"columns":["name"],"referenced_columns":null,"comment":""}],"triggers":[],"def":"CREATE TABLE `chair_models` (\n  `name` varchar(50) NOT NULL COMMENT '椅子モデル名',\n  `speed` int NOT NULL COMMENT '移動速度',\n  PRIMARY KEY (`name`)\n) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci COMMENT='椅子モデルテーブル'"},{"name":"chairs","type":"BASE TABLE","comment":"椅子情報テーブル","columns":[{"name":"id","type":"varchar(26)","nullable":false,"default":null,"comment":"椅子ID"},{"name":"owner_id","type":"varchar(26)","nullable":false,"default":null,"comment":"オーナーID"},{"name":"name","type":"varchar(30)","nullable":false,"default":null,"comment":"椅子の名前"},{"name":"model","type":"text","nullable":false,"default":null,"comment":"椅子のモデル"},{"name":"is_active","type":"tinyint(1)","nullable":false,"default":null,"comment":"配椅子受付中かどうか"},{"name":"access_token","type":"varchar(255)","nullable":false,"default":null,"comment":"アクセストークン"},{"name":"created_at","type":"datetime(6)","nullable":false,"default":"CURRENT_TIMESTAMP(6)","extra_def":"DEFAULT_GENERATED","comment":"登録日時"},{"name":"updated_at","type":"datetime(6)","nullable":false,"default":"CURRENT_TIMESTAMP(6)","extra_def":"DEFAULT_GENERATED on update CURRENT_TIMESTAMP(6)","comment":"更新日時"}],"indexes":[{"name":"PRIMARY","def":"PRIMARY KEY (id) USING BTREE","table":"chairs","columns":["id"],"comment":""}],"constraints":[{"name":"PRIMARY","type":"PRIMARY KEY","def":"PRIMARY KEY (id)","table":"chairs","referenced_table":null,"columns":["id"],"referenced_columns":null,"comment":""}],"triggers":[],"def":"CREATE TABLE `chairs` (\n  `id` varchar(26) NOT NULL COMMENT '椅子ID',\n  `owner_id` varchar(26) NOT NULL COMMENT 'オーナーID',\n  `name` varchar(30) NOT NULL COMMENT '椅子の名前',\n  `model` text NOT NULL COMMENT '椅子のモデル',\n  `is_active` tinyint(1) NOT NULL COMMENT '配椅子受付中かどうか',\n  `access_token` varchar(255) NOT NULL COMMENT 'アクセストークン',\n  `created_at` datetime(6) NOT NULL DEFAULT CURRENT_TIMESTAMP(6) COMMENT '登録日時',\n  `updated_at` datetime(6) NOT NULL DEFAULT CURRENT_TIMESTAMP(6) ON UPDATE CURRENT_TIMESTAMP(6) COMMENT '更新日時',\n  PRIMARY KEY (`id`)\n) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci COMMENT='椅子情報テーブル'"},{"name":"coupons","type":"BASE TABLE","comment":"クーポンテーブル","columns":[{"name":"user_id","type":"varchar(26)","nullable":false,"default":null,"comment":"所有しているユーザーのID"},{"name":"code","type":"varchar(255)","nullable":false,"default":null,"comment":"クーポンコード"},{"name":"discount","type":"int","nullable":false,"default":null,"comment":"割引額"},{"name":"created_at","type":"datetime(6)","nullable":false,"default":"CURRENT_TIMESTAMP(6)","extra_def":"DEFAULT_GENERATED","comment":"付与日時"},{"name":"used_by","type":"varchar(26)","nullable":true,"default":null,"comment":"クーポンが適用されたライドのID"}],"indexes":[{"name":"PRIMARY","def":"PRIMARY KEY (user_id, code) USING BTREE","table":"coupons","columns":["user_id","code"],"comment":""}],"constraints":[{"name":"PRIMARY","type":"PRIMARY KEY","def":"PRIMARY KEY (user_id, code)","table":"coupons","referenced_table":null,"columns":["user_id","code"],"referenced_columns":null,"comment":""}],"triggers":[],"def":"CREATE TABLE `coupons` (\n  `user_id` varchar(26) NOT NULL COMMENT '所有しているユーザーのID',\n  `code` varchar(255) NOT NULL COMMENT 'クーポンコード',\n  `discount` int NOT NULL COMMENT '割引額',\n  `created_at` datetime(6) NOT NULL DEFAULT CURRENT_TIMESTAMP(6) COMMENT '付与日時',\n  `used_by` varchar(26) DEFAULT NULL COMMENT 'クーポンが適用されたライドのID',\n  PRIMARY KEY (`user_id`,`code`)\n) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci COMMENT='クーポンテーブル'"},{"name":"owners","type":"BASE TABLE","comment":"椅子のオーナー情報テーブル","columns":[{"name":"id","type":"varchar(26)","nullable":false,"default":null,"comment":"オーナーID"},{"name":"name","type":"varchar(30)","nullable":false,"default":null,"comment":"オーナー名"},{"name":"access_token","type":"varchar(255)","nullable":false,"default":null,"comment":"アクセストークン"},{"name":"chair_register_token","type":"varchar(255)","nullable":false,"default":null,"comment":"椅子登録トークン"},{"name":"created_at","type":"datetime(6)","nullable":false,"default":"CURRENT_TIMESTAMP(6)","extra_def":"DEFAULT_GENERATED","comment":"登録日時"},{"name":"updated_at","type":"datetime(6)","nullable":false,"default":"CURRENT_TIMESTAMP(6)","extra_def":"DEFAULT_GENERATED on update CURRENT_TIMESTAMP(6)","comment":"更新日時"}],"indexes":[{"name":"PRIMARY","def":"PRIMARY KEY (id) USING BTREE","table":"owners","columns":["id"],"comment":""},{"name":"access_token","def":"UNIQUE KEY access_token (access_token) USING BTREE","table":"owners","columns":["access_token"],"comment":""},{"name":"chair_register_token","def":"UNIQUE KEY chair_register_token (chair_register_token) USING BTREE","table":"owners","columns":["chair_register_token"],"comment":""},{"name":"name","def":"UNIQUE KEY name (name) USING BTREE","table":"owners","columns":["name"],"comment":""}],"constraints":[{"name":"access_token","type":"UNIQUE","def":"UNIQUE KEY access_token (access_token)","table":"owners","referenced_table":null,"columns":["access_token"],"referenced_columns":null,"comment":""},{"name":"chair_register_token","type":"UNIQUE","def":"UNIQUE KEY chair_register_token (chair_register_token)","table":"owners","referenced_table":null,"columns":["chair_register_token"],"referenced_columns":null,"comment":""},{"name":"name","type":"UNIQUE","def":"UNIQUE KEY name (name)","table":"owners","referenced_table":null,"columns":["name"],"referenced_columns":null,"comment":""},{"name":"PRIMARY","type":"PRIMARY KEY","def":"PRIMARY KEY (id)","table":"owners","referenced_table":null,"columns":["id"],"referenced_columns":null,"comment":""}],"triggers":[],"def":"CREATE TABLE `owners` (\n  `id` varchar(26) NOT NULL COMMENT 'オーナーID',\n  `name` varchar(30) NOT NULL COMMENT 'オーナー名',\n  `access_token` varchar(255) NOT NULL COMMENT 'アクセストークン',\n  `chair_register_token` varchar(255) NOT NULL COMMENT '椅子登録トークン',\n  `created_at` datetime(6) NOT NULL DEFAULT CURRENT_TIMESTAMP(6) COMMENT '登録日時',\n  `updated_at` datetime(6) NOT NULL DEFAULT CURRENT_TIMESTAMP(6) ON UPDATE CURRENT_TIMESTAMP(6) COMMENT '更新日時',\n  PRIMARY KEY (`id`),\n  UNIQUE KEY `name` (`name`),\n  UNIQUE KEY `access_token` (`access_token`),\n  UNIQUE KEY `chair_register_token` (`chair_register_token`)\n) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci COMMENT='椅子のオーナー情報テーブル'"},{"name":"payment_tokens","type":"BASE TABLE","comment":"決済トークンテーブル","columns":[{"name":"user_id","type":"varchar(26)","nullable":false,"default":null,"comment":"ユーザーID"},{"name":"token","type":"varchar(255)","nullable":false,"default":null,"comment":"決済トークン"},{"name":"created_at","type":"datetime(6)","nullable":false,"default":"CURRENT_TIMESTAMP(6)","extra_def":"DEFAULT_GENERATED","comment":"登録日時"}],"indexes":[{"name":"PRIMARY","def":"PRIMARY KEY (user_id) USING BTREE","table":"payment_tokens","columns":["user_id"],"comment":""}],"constraints":[{"name":"PRIMARY","type":"PRIMARY KEY","def":"PRIMARY KEY (user_id)","table":"payment_tokens","referenced_table":null,"columns":["user_id"],"referenced_columns":null,"comment":""}],"triggers":[],"def":"CREATE TABLE `payment_tokens` (\n  `user_id` varchar(26) NOT NULL COMMENT 'ユーザーID',\n  `token` varchar(255) NOT NULL COMMENT '決済トークン',\n  `created_at` datetime(6) NOT NULL DEFAULT CURRENT_TIMESTAMP(6) COMMENT '登録日時',\n  PRIMARY KEY (`user_id`)\n) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci COMMENT='決済トークンテーブル'"},{"name":"ride_statuses","type":"BASE TABLE","comment":"ライドステータスの変更履歴テーブル","columns":[{"name":"id","type":"varchar(26)","nullable":false,"default":null,"comment":""},{"name":"ride_id","type":"varchar(26)","nullable":false,"default":null,"comment":"ライドID"},{"name":"status","type":"enum('MATCHING','ENROUTE','PICKUP','CARRYING','ARRIVED','COMPLETED')","nullable":false,"default":null,"comment":"状態"},{"name":"created_at","type":"datetime(6)","nullable":false,"default":"CURRENT_TIMESTAMP(6)","extra_def":"DEFAULT_GENERATED","comment":"状態変更日時"},{"name":"app_sent_at","type":"datetime(6)","nullable":true,"default":null,"comment":"ユーザーへの状態通知日時"},{"name":"chair_sent_at","type":"datetime(6)","nullable":true,"default":null,"comment":"椅子への状態通知日時"}],"indexes":[{"name":"PRIMARY","def":"PRIMARY KEY (id) USING BTREE","table":"ride_statuses","columns":["id"],"comment":""}],"constraints":[{"name":"PRIMARY","type":"PRIMARY KEY","def":"PRIMARY KEY (id)","table":"ride_statuses","referenced_table":null,"columns":["id"],"referenced_columns":null,"comment":""}],"triggers":[],"def":"CREATE TABLE `ride_statuses` (\n  `id` varchar(26) NOT NULL,\n  `ride_id` varchar(26) NOT NULL COMMENT 'ライドID',\n  `status` enum('MATCHING','ENROUTE','PICKUP','CARRYING','ARRIVED','COMPLETED') NOT NULL COMMENT '状態',\n  `created_at` datetime(6) NOT NULL DEFAULT CURRENT_TIMESTAMP(6) COMMENT '状態変更日時',\n  `app_sent_at` datetime(6) DEFAULT NULL COMMENT 'ユーザーへの状態通知日時',\n  `chair_sent_at` datetime(6) DEFAULT NULL COMMENT '椅子への状態通知日時',\n  PRIMARY KEY (`id`)\n) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci COMMENT='ライドステータスの変更履歴テーブル'"},{"name":"rides","type":"BASE TABLE","comment":"ライド情報テーブル","columns":[{"name":"id","type":"varchar(26)","nullable":false,"default":null,"comment":"ライドID"},{"name":"user_id","type":"varchar(26)","nullable":false,"default":null,"comment":"ユーザーID"},{"name":"chair_id","type":"varchar(26)","nullable":true,"default":null,"comment":"割り当てられた椅子ID"},{"name":"pickup_latitude","type":"int","nullable":false,"default":null,"comment":"配車位置(経度)"},{"name":"pickup_longitude","type":"int","nullable":false,"default":null,"comment":"配車位置(緯度)"},{"name":"destination_latitude","type":"int","nullable":false,"default":null,"comment":"目的地(経度)"},{"name":"destination_longitude","type":"int","nullable":false,"default":null,"comment":"目的地(緯度)"},{"name":"evaluation","type":"int","nullable":true,"default":null,"comment":"評価"},{"name":"created_at","type":"datetime(6)","nullable":false,"default":"CURRENT_TIMESTAMP(6)","extra_def":"DEFAULT_GENERATED","comment":"要求日時"},{"name":"updated_at","type":"datetime(6)","nullable":false,"default":"CURRENT_TIMESTAMP(6)","extra_def":"DEFAULT_GENERATED on update CURRENT_TIMESTAMP(6)","comment":"状態更新日時"}],"indexes":[{"name":"PRIMARY","def":"PRIMARY KEY (id) USING BTREE","table":"rides","columns":["id"],"comment":""}],"constraints":[{"name":"PRIMARY","type":"PRIMARY KEY","def":"PRIMARY KEY (id)","table":"rides","referenced_table":null,"columns":["id"],"referenced_columns":null,"comment":""}],"triggers":[],"def":"CREATE TABLE `rides` (\n  `id` varchar(26) NOT NULL COMMENT 'ライドID',\n  `user_id` varchar(26) NOT NULL COMMENT 'ユーザーID',\n  `chair_id` varchar(26) DEFAULT NULL COMMENT '割り当てられた椅子ID',\n  `pickup_latitude` int NOT NULL COMMENT '配車位置(経度)',\n  `pickup_longitude` int NOT NULL COMMENT '配車位置(緯度)',\n  `destination_latitude` int NOT NULL COMMENT '目的地(経度)',\n  `destination_longitude` int NOT NULL COMMENT '目的地(緯度)',\n  `evaluation` int DEFAULT NULL COMMENT '評価',\n  `created_at` datetime(6) NOT NULL DEFAULT CURRENT_TIMESTAMP(6) COMMENT '要求日時',\n  `updated_at` datetime(6) NOT NULL DEFAULT CURRENT_TIMESTAMP(6) ON UPDATE CURRENT_TIMESTAMP(6) COMMENT '状態更新日時',\n  PRIMARY KEY (`id`)\n) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci COMMENT='ライド情報テーブル'"},{"name":"settings","type":"BASE TABLE","comment":"システム設定テーブル","columns":[{"name":"name","type":"varchar(30)","nullable":false,"default":null,"comment":"設定名"},{"name":"value","type":"text","nullable":false,"default":null,"comment":"設定値"}],"indexes":[{"name":"PRIMARY","def":"PRIMARY KEY (name) USING BTREE","table":"settings","columns":["name"],"comment":""}],"constraints":[{"name":"PRIMARY","type":"PRIMARY KEY","def":"PRIMARY KEY (name)","table":"settings","referenced_table":null,"columns":["name"],"referenced_columns":null,"comment":""}],"triggers":[],"def":"CREATE TABLE `settings` (\n  `name` varchar(30) NOT NULL COMMENT '設定名',\n  `value` text NOT NULL COMMENT '設定値',\n  PRIMARY KEY (`name`)\n) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci COMMENT='システム設定テーブル'"},{"name":"users","type":"BASE TABLE","comment":"利用者情報テーブル","columns":[{"name":"id","type":"varchar(26)","nullable":false,"default":null,"comment":"ユーザーID"},{"name":"username","type":"varchar(30)","nullable":false,"default":null,"comment":"ユーザー名"},{"name":"firstname","type":"varchar(30)","nullable":false,"default":null,"comment":"本名(名前)"},{"name":"lastname","type":"varchar(30)","nullable":false,"default":null,"comment":"本名(名字)"},{"name":"date_of_birth","type":"varchar(30)","nullable":false,"default":null,"comment":"生年月日"},{"name":"access_token","type":"varchar(255)","nullable":false,"default":null,"comment":"アクセストークン"},{"name":"invitation_code","type":"varchar(30)","nullable":false,"default":null,"comment":"招待トークン"},{"name":"created_at","type":"datetime(6)","nullable":false,"default":"CURRENT_TIMESTAMP(6)","extra_def":"DEFAULT_GENERATED","comment":"登録日時"},{"name":"updated_at","type":"datetime(6)","nullable":false,"default":"CURRENT_TIMESTAMP(6)","extra_def":"DEFAULT_GENERATED on update CURRENT_TIMESTAMP(6)","comment":"更新日時"}],"indexes":[{"name":"PRIMARY","def":"PRIMARY KEY (id) USING BTREE","table":"users","columns":["id"],"comment":""},{"name":"access_token","def":"UNIQUE KEY access_token (access_token) USING BTREE","table":"users","columns":["access_token"],"comment":""},{"name":"invitation_code","def":"UNIQUE KEY invitation_code (invitation_code) USING BTREE","table":"users","columns":["invitation_code"],"comment":""},{"name":"username","def":"UNIQUE KEY username (username) USING BTREE","table":"users","columns":["username"],"comment":""}],"constraints":[{"name":"access_token","type":"UNIQUE","def":"UNIQUE KEY access_token (access_token)","table":"users","referenced_table":null,"columns":["access_token"],"referenced_columns":null,"comment":""},{"name":"invitation_code","type":"UNIQUE","def":"UNIQUE KEY invitation_code (invitation_code)","table":"users","referenced_table":null,"columns":["invitation_code"],"referenced_columns":null,"comment":""},{"name":"PRIMARY","type":"PRIMARY KEY","def":"PRIMARY KEY (id)","table":"users","referenced_table":null,"columns":["id"],"referenced_columns":null,"comment":""},{"name":"username","type":"UNIQUE","def":"UNIQUE KEY username (username)","table":"users","referenced_table":null,"columns":["username"],"referenced_columns":null,"comment":""}],"triggers":[],"def":"CREATE TABLE `users` (\n  `id` varchar(26) NOT NULL COMMENT 'ユーザーID',\n  `username` varchar(30) NOT NULL COMMENT 'ユーザー名',\n  `firstname` varchar(30) NOT NULL COMMENT '本名(名前)',\n  `lastname` varchar(30) NOT NULL COMMENT '本名(名字)',\n  `date_of_birth` varchar(30) NOT NULL COMMENT '生年月日',\n  `access_token` varchar(255) NOT NULL COMMENT 'アクセストークン',\n  `invitation_code` varchar(30) NOT NULL COMMENT '招待トークン',\n  `created_at` datetime(6) NOT NULL DEFAULT CURRENT_TIMESTAMP(6) COMMENT '登録日時',\n  `updated_at` datetime(6) NOT NULL DEFAULT CURRENT_TIMESTAMP(6) ON UPDATE CURRENT_TIMESTAMP(6) COMMENT '更新日時',\n  PRIMARY KEY (`id`),\n  UNIQUE KEY `username` (`username`),\n  UNIQUE KEY `access_token` (`access_token`),\n  UNIQUE KEY `invitation_code` (`invitation_code`)\n) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci COMMENT='利用者情報テーブル'"}],"relations":[],"functions":[],"driver":{"name":"mysql","database_version":"8.0.40-0ubuntu0.24.04.1","meta":{"dict":{"Functions":"Stored procedures and functions"}}}}
